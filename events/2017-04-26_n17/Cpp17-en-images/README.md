C++17 en images
===============

Copyright 2017 Oliver H &emsp; [CC BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/deed.fr)

[![le logo C++FRUG est consitué du drapeau de la francophonie avec C++ au centre](http://cpp-frug.github.io/images/Cpp-Francophonie.svg "Logo C++FRUG")](https://github.com/cpp-frug/cpp-frug.github.io/blob/master/images/Cpp-Francophonie.svg)

[cppfrug.org/paris/events/2017-04-26_n17/Cpp17-en-images](http://cpp-frug.github.io/paris/events/2017-04-26_n17/Cpp17-en-images/)

[github.com/cpp-frug/paris/events/2017-04-26_n17/Cpp17-en-images](https://github.com/cpp-frug/paris/blob/master/events/2017-04-26_n17/Cpp17-en-images/README.md)


C'était mieux avant ?
---------------------

[![Évolution du langage C++](https://cpp-frug.github.io/materials/images/cpp-evolution-path.svg)](https://github.com/cpp-frug/materials/blob/gh-pages/images/cpp-evolution-original.svg)


C++ a une quarantaine d'années
------------------------------

* 1977 &emsp; Bjarn rêve au **C with classes**
* 1990 &emsp; Schisme entre **C** et **C++**
* 1998 &emsp; Premier standard --> **C++98**
* 2017 &emsp; Cinquième standard --> **C++17**


C++17 c'est un gros pavé
------------------------

[![Deux collègues contents de la sortie de C++17 mais qui ils ne sont pas au courant des Meetups C++FRUG qui leur permettrait de cerner les nouvelles fonctionnalités.](http://cpp-frug.github.io/materials/images/cpp-complexe-cppfrug.svg)](https://github.com/cpp-frug/materials/blob/gh-pages/images/cpp-complexe-cppfrug.svg)


C++17 ajoute 220 pages
----------------------

Date      | ISO/IEC ou Draft                                                                                         | Pages
--------- | -------------------------------------------------------------------------------------------------------- | -------
1998-09-01|C++98 [14882:1998](http://www.lirmm.fr/~ducour/Doc-objets/ISO+IEC+14882-1998.pdf)                         |  776 pages
2003-10-15|C++03 [14882:2003](https://github.com/hstefan/htlib/blob/master/res/INCITS%2BISO%2BIEC%2B14882-2003.pdf)  |  786 pages (+ 1%)
2011-09-01|C++11 [14882:2011](http://new.vk.com/doc100509572_160085962?hash=6801602629449dfa59&dl=27c32949114b3322a2)| 1356 pages (+73%)
2012-02-28|C++11 [N3376](http://open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3376.pdf)                              | 1324 pages
2014-11-19|C++14 [N4296](http://open-std.org/JTC1/SC22/WG21/docs/papers/2014/n4296.pdf)                              | 1368 pages (+ 3%)
2017-03-21|C++17 [N4618](http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/n4618.pdf)                              | 1622 pages (+19%)


2016 : Deux réunions pour figer le périmètre du C++17
-----------------------------------------------------

Photo d'Oulu prise par Loïc Joly pendant la réunion ISO C++.  
Elle a été prise à 23h, en plein centre ville.

[![Oulu à 23h](https://lh3.googleusercontent.com/0A9lXOQ9_b0UemOzUk1efet5-IrhzlxAfzPHq4x8OozDzuhubo5bRdUBcF4ey5UZ7FioEmowuzcWRgtywU94xyxb2-jm19R_Diuec9oPVzYBoDoRTu6TzWo_CsWtbZa6o-Wf8zH7K0nk-guS9He1m7xAwwJnVbvWPyih0XqOvQTxlP06fCPs1gBlJKYBx3ATiK7ryjypu0kQi2p5gHHSJ_w9apa_4eyfRj-7r13HgRVf-GqADUGNYEWbnQZKLq1lvqmYKLHr_NCm1aKxRELW3qfNUSHKW9IzuXF6hszPhulO_YRloMiX08FTbBmwCnnPpeRc4q-zHXgeiOFQdr3GLyO5kmOLLmc0B-i4S2DC1nXZymn523GxcTt0aGT7i1mX2tcDdESDAdlfREd427O08a31uaCNJAHNA13i62IhO_ZBJHoNMCTMxLX2DYBKcXjcvJNmmzIbO69Tn66S3_P7QI9ZZTAcc6_bUyV8A6IuaZ-xinYeLgPSBoIb3ampTCNMPxzn1XjrVhDmxLBmtYJjR2XZrRyXmgn9O3PYSHA4wb_ti2SPdUw8BN91kPAyR5-OnhF0yJJ1s-5EbVvmgw9mkO8e7lUc2hldoSPMUuOU7IuIQ8sev9MCYbYl6e49GSI_4XGRPpMXRbdyP4inRCQqlaHV4ltwJq6xTd-Zne9MZw=w675-h900-no)](https://goo.gl/photos/Fb6RYRfYj4pymtCk7)


01:00 de la nuit à Tromsø à 600 km de Oulu en juin
--------------------------------------------------

[![Le soleil n'est pas encore couché à une heure du matin dans la ville de Tromsø à 600 km de Oulu](https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Gr%C3%B8nnegata_Troms%C3%B8.jpg/1024px-Gr%C3%B8nnegata_Troms%C3%B8.jpg)](https://commons.wikimedia.org/wiki/File:Gr%C3%B8nnegata_Troms%C3%B8.jpg)


Les *Concepts* et *Reflexion* étaient très attendues
----------------------------------------------------

[![Deux chatons tristes que Concepts et Reflexion n'aient pas été intégrées à C++17](http://cpp-frug.github.io/materials/images/cpp-chatons-tristes_copyright-Ziyue-OliverH-2016_CC-BY-SA-3.jpg)](https://github.com/cpp-frug/materials/blob/gh-pages/images/cpp-chatons-tristes_copyright-Ziyue-OliverH-2016_CC-BY-SA-3.jpg)


2003 - Bjarne Stroustrup présente les Concepts au comité C++
------------------------------------------------------------

[![Bjarne et les Concepts en 2003](http://cpp-frug.github.io/materials/images/cpp-concepts-bjarne-path.2003.face.svg)](https://github.com/cpp-frug/materials/blob/gh-pages/images/cpp-concepts-bjarne-path.2003.face.svg)

*Quoi ! Pas pour C++03 ?*  
*Bon Okey, C++03 n'est qu'une version mineure...*


2011 - Les Concepts
-------------------

[![Bjarne et les Concepts en 2011](http://cpp-frug.github.io/materials/images/cpp-concepts-bjarne-path.2011.face.svg)](https://github.com/cpp-frug/materials/blob/gh-pages/images/cpp-concepts-bjarne-path.2011.face.svg)

*Quoi ! Pas pour C++11 ?*  
*Bon Okey, faut bien arrêter de repousser C++0x...*


2014 - Les Concepts
-------------------

[![Bjarne et les Concepts en 2014](http://cpp-frug.github.io/materials/images/cpp-concepts-bjarne-path.2014.face.svg)](https://github.com/cpp-frug/materials/blob/gh-pages/images/cpp-concepts-bjarne-path.2014.face.svg)

*Quoi ! Pas pour C++14 ?*  
*Bon Okey, C++14 n'est qu'une version mineure...*


2017 - Les Concepts
-------------------

[![Bjarne et les Concepts en 2017](http://cpp-frug.github.io/materials/images/cpp-concepts-bjarne-path.2017.face.svg)](https://github.com/cpp-frug/materials/blob/gh-pages/images/cpp-concepts-bjarne-path.2017.face.svg)

*Quoi ! Pas pour C++17 ?*  
*Bon Okey, mais on arrête les versions mineures...*


De très nombreuses décénies plus tard, les Concepts sont enfin intégrés
-----------------------------------------------------------------------

[![Bjarne et les Concepts en 20xx](http://cpp-frug.github.io/materials/images/cpp-concepts-bjarne-path.20xx.face.svg)](https://github.com/cpp-frug/materials/blob/gh-pages/images/cpp-concepts-bjarne-path.20xx.face.svg)

*Ce n'est pas trop tôt !*


Un air de promesses électorales
-------------------------------

[![C++17 président](http://cpp-frug.github.io/materials/images/cpp-president-2017.svg)](https://github.com/cpp-frug/materials/blob/gh-pages/images/cpp-president-2017.svg)



C++17 = Dépoussièrer le standard C++
====================================


[*The C++ Programming Language*][CppPL]  
de [Bjarne Stroustrup][BS] inventeur du C++  

[CppPL]: https://fr.wikipedia.org/wiki/The_C%2B%2B_Programming_Language
[BS]:    https://fr.wikipedia.org/wiki/Bjarne_Stroustrup

![logo "The C++ Programming Language"](https://isocpp.org/files/img/logo1.PNG)


Quatrième édition publiée en 2013 à la [page 1046][p1046] du paragraphe **36.3.6 _STL‐like Operations_**

[p1046]: http://www.ebooksbucket.com/the-c-programming-language-4th-edition-b198

>The `replace()` replaces one substring with another and adjusts the `string`’s size accordingly. For example:
>
>```cpp
>void f()
>{
>  string s = "but I have heard it works even if you don't believe in it";
>  s.replace(0,4,"");                   // erase initial "but "
>  s.replace(s.find("even"),4,"only");
>  s.replace(s.find(" don't"),6,"");    // erase by replacing with ""
>  assert(s=="I have heard it works only if you believe in it");
>}
>```


> A `replace()` returns a reference to the object for which it was called.  This can be used for chaining operations:
>
>```cpp
>void f2()
>{
>  string s = "but I have heard it works even if you don't believe in it";
>  s.replace(0,4,"").replace(s.find("even"),4,"only").replace(s.find(" don't"),6,"");
>  assert(s=="I have heard it works only if you believe in it");
>}
>```

[![On modifie le C++ pour corriger le livre de Bjarn](http://cpp-frug.github.io/materials/images/cpp17-bjarne-ordre-evaluation.png)](https://github.com/cpp-frug/materials/blob/gh-pages/images/cpp17-bjarne-ordre-evaluation.png)


Virgule flottante en hexadécimal
--------------------------------
    
[**P0245**](http://wg21.link/p0245) officialise les ***hexadecimal floating literals*** (comme pour C99, Java 5 2004)
    
```cpp
float  v = 0x'Baffe.bobo'p1f;
double w = 0x'C0DE'2017'1.cafe'p1;
``` 
    
[![Les Nerdettes s’entraînent pour le concours des littéraux hexadécimaux sur LinuxFr.org](https://cpp-frug.github.io/materials/images/nerdettes_litteral_hexa.svg)](https://github.com/cpp-frug/materials/blob/gh-pages/images/nerdettes_litteral_hexa.svg)




Variable `inline` ([P0386](http://wg21.link/p0386))
----------------------------------------------------

* Après les variables `template` (C++14)
* Fin du [***One Definition Rule***](https://en.wikipedia.org/wiki/One_Definition_Rule) ?

[![Les deux filles nerds résolvent une erreur de link d'une variable membre static non définie en rajoutant inline](https://cpp-frug.github.io/materials/images/nerd_cpp17_variable_inline.svg)](https://github.com/cpp-frug/materials/blob/gh-pages/images/nerd_cpp17_variable_inline.svg)




`auto x{42};` déduit comme `int x{42};`
-------------------------------------

[N3922](https://wg21.link/n3922) comble un trou dans les règles de déduction pour `auto` à partir des `{`listes d'initialisation`}`
    
```cpp
auto a   {1};     //ok => int a{1};
auto b = {1};     //ok => std::initializer_list<int> b = {1};
    
auto c   {1, 2};  //KO car plus d'un élément
auto d = {1, 2};  //ok => std::initializer_list<int> d = {1, 2};
    
auto e   {1, 2.0}; //KO car plus d'un élément
auto f = {1, 2.0}; //KO car pas le même type (int et double)
``` 
    
[![Une écolière écrit une boucle for en C++17 pour régler sa punition d'écrire 100 fois "Je ne dois pas envoyer d'avion en papier"](http://cpp-frug.github.io/materials/images/cpp-ecole-primaire_copyright-Ziyue-OliverH-2016_CC-BY-SA-3_auto.jpg)](https://github.com/cpp-frug/materials/blob/gh-pages/images/README.md#c17-sauve-une-%C3%A9coli%C3%A8re)







Apple ][ (1977-1988)
--------------------

Ou sont les *accolade* et *crochet* ?

[![Image du clavier de l'Apple II qui n'a pas de touche avec accolade ou crochet](https://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Apple_II-IMG_7073.jpg/1024px-Apple_II-IMG_7073.jpg)](https://commons.wikimedia.org/wiki/File:Apple_II-IMG_7073.jpg)


BBC Master (1986-1994)
----------------------

Ah les *crochets*, mais pas les *accolades* ?

[![Clavier intégré du micro-ordinateur BBC Master de Acorn](https://upload.wikimedia.org/wikipedia/commons/6/60/Acorn_BBC_Master_Series.jpg "Micro-ordinateur BBC Master de Acorn (8-bit avec clavier intégré) fabriqué entre 1986 et 1994")](https://en.wikipedia.org/wiki/BBC_Master)

Suppression des trigraphes
--------------------------

**C++11** : Trigraphes prévus pour être obsolètes.  
Mais des membres du comité se sont opposés.  

**C++17** - [N4086](https://wg21.link/n4086) les supprime  
sans passer par l'étape *deprecated*.


```cpp
/??/
/??/ Avec trigraphes
??=include <iostream>
int main (int argc, char *argv??(??)) ??< 
  const char txt??(??) = "J'aime le C++17??/0";
  std::cout << txt << std::endl;
??>
``` 


```cpp
/\
/\ Sans trigraphe
#include <iostream>
int main (int argc, char *argv[]) {
  const char txt[] = "J'aime le C++17";
  std::cout << txt << std::endl;
}
```




Fonctions libres
----------------

[![Les fonctions empty, data() et size() sortent de la prison "class" et rejoignent les fonctions begin() et end() qui les accueillent. Ces deux dernières fonctions accueillent également string_view. Derrières les barreaux de la prison des spécifications techniques, Unified-Call-Syntax va devoir y rester trois ans pour tenter de sortir avec C++20](http://cpp-frug.github.io/materials/images/fonctions_libres.svg)](https://github.com/cpp-frug/materials/blob/gh-pages/images/README.md#les-fonctions-libres)
